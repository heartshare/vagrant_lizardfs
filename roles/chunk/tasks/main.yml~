##- name: apt update and install lizardfs-chunkserver
##  apt: name=lizardfs-chunkserver update_cache=yes

- name: chunk cfg file
  copy: src={{ item.src }} dest={{ item.dest }} owner=root group=root mode=0644
  with_items:
    - { src: 'mfschunkserver.cfg', dest: '/etc/mfs/mfschunkserver.cfg' }
    - { src: 'mfshdd.cfg', dest: '/etc/mfs/mfshdd.cfg' }

- name: /mnt/hd dir
  file: path={{ item }} state=directory owner=mfs group=mfs mode=0755
  with_items:
    - /mnt/hd1
    - /mnt/hd2

- name: mkfs
  filesystem: fstype=xfs dev={{ item }}
  with_items:
    - /dev/sdb1
    - /dev/sdc1
  
- name: check mount of disk
  mount: name={{ item.name }} src={{ item.src }} fstype=xfs state=mounted
  with_items:
    - { name: '/mnt/hd1', src: '/dev/sdb1' }
    - { name: '/mnt/hd2', src: '/dev/sdc1' }



